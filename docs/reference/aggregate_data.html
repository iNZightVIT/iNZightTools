<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Aggregate data by categorical variables — aggregate_data • iNZightTools</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Aggregate data by categorical variables — aggregate_data"><meta property="og:description" content="Summarizes non-categorical variables in a dataframe by grouping them
based on specified categorical variables and returns the aggregated result
along with the tidyverse code used to generate it."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">iNZightTools</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">2.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/iNZightVIT/iNZightTools/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Aggregate data by categorical variables</h1>
    <small class="dont-index">Source: <a href="https://github.com/iNZightVIT/iNZightTools/blob/HEAD/R/aggregate.R" class="external-link"><code>R/aggregate.R</code></a></small>
    <div class="hidden name"><code>aggregate_data.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Summarizes non-categorical variables in a dataframe by grouping them
based on specified categorical variables and returns the aggregated result
along with the tidyverse code used to generate it.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">aggregate_data</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  <span class="va">group_vars</span>,</span>
<span>  <span class="va">summaries</span>,</span>
<span>  vars <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  names <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  quantiles <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.25</span>, <span class="fl">0.75</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">aggregate_dt</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  <span class="va">dt</span>,</span>
<span>  <span class="va">dt_comp</span>,</span>
<span>  group_vars <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">summaries</span>,</span>
<span>  vars <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  names <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  quantiles <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.25</span>, <span class="fl">0.75</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>data</dt>
<dd><p>A dataframe or survey design object to be aggregated.</p></dd>


<dt>group_vars</dt>
<dd><p>A character vector specifying the variables in <code>data</code> to '
be used as grouping factors.</p></dd>


<dt>summaries</dt>
<dd><p>An unnamed character vector or named list of summary
functions to calculate for each group.
If unnamed, the vector elements should be names of variables in the
dataset for which summary statistics need to be calculated.
If named, the names should correspond to the summary functions
(e.g., "mean", "sd", "iqr") to be applied to each variable.</p></dd>


<dt>vars</dt>
<dd><p>(Optional) A character vector specifying the names of variables
in the dataset for which summary statistics need to be calculated.
This argument is ignored if <code>summaries</code> is a named list.</p></dd>


<dt>names</dt>
<dd><p>(Optional) A character vector or named list providing name
templates for the newly created variables. See details for more
information.</p></dd>


<dt>quantiles</dt>
<dd><p>(Optional) A numeric vector specifying the desired
quantiles (e.g., c(0.25, 0.5, 0.75)).
See details for more information.</p></dd>


<dt>dt</dt>
<dd><p>A character string representing the name of the date-time variable
in the dataset.</p></dd>


<dt>dt_comp</dt>
<dd><p>A character string specifying the component of the date-time
to use for grouping.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>An aggregated dataframe containing the summary statistics for each
group, along with the tidyverse code used for the aggregation.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>The <code>aggregate_data()</code> function accepts any R function that returns a
single-value summary (e.g., <code>mean</code>, <code>var</code>, <code>sd</code>, <code>sum</code>, <code>IQR</code>). By default,
new variables are named <code>{var}_{fun}</code>, where <code>{var}</code> is the variable name
and <code>{fun}</code> is the summary function used. The user can provide custom names
using the <code>names</code> argument, either as a vector of the same length as <code>vars</code>,
or as a named list where the names correspond to summary functions (e.g.,
"mean" or "sd").</p>
<p>The special summary "missing" can be included, which counts the number of
missing values in the variable. The default name for this summary is
<code>{var}_missing</code>.</p>
<p>If <code>quantiles</code> are requested, the function calculates the specified
quantiles (e.g., 25th, 50th, 75th percentiles), creating new variables for
each quantile. To customize the names of these variables, use <code>{p}</code> as a
placeholder in the <code>names</code> argument, where <code>{p}</code> represents the quantile
value. For example, using <code>names = "Q{p}_{var}"</code> will create variables like
"Q0.25_Sepal.Length" for the 25th percentile.</p>
    </div>
    <div id="functions">
    <h2>Functions</h2>
    
<ul><li><p><code>aggregate_dt()</code>: Aggregate data by dates and times</p></li>
</ul></div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="code.html">code</a></code></p>
<p><code>aggregate_data</code></p></div>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>Tom Elliott, Owen Jin, Zhaoming Su</p>
<p>Zhaoming Su</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">aggregated</span> <span class="op">&lt;-</span></span></span>
<span class="r-in"><span>    <span class="fu">aggregate_data</span><span class="op">(</span><span class="va">iris</span>,</span></span>
<span class="r-in"><span>        group_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Species"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>        summaries <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mean"</span>, <span class="st">"sd"</span>, <span class="st">"iqr"</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="code.html">code</a></span><span class="op">(</span><span class="va">aggregated</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Loading required namespace: styler</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> iris |&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     dplyr::group_by(Species) |&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     dplyr::summarise(</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         Sepal.Length_mean = mean(Sepal.Length,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             na.rm = TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         ),</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         Sepal.Width_mean = mean(Sepal.Width,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             na.rm = TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         ),</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         Petal.Length_mean = mean(Petal.Length,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             na.rm = TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         ),</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         Petal.Width_mean = mean(Petal.Width,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             na.rm = TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         ),</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         Sepal.Length_sd = sd(Sepal.Length,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             na.rm = TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         ),</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         Sepal.Width_sd = sd(Sepal.Width,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             na.rm = TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         ),</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         Petal.Length_sd = sd(Petal.Length,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             na.rm = TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         ),</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         Petal.Width_sd = sd(Petal.Width,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             na.rm = TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         ),</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         Sepal.Length_iqr = IQR(Sepal.Length,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             na.rm = TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         ),</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         Sepal.Width_iqr = IQR(Sepal.Width,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             na.rm = TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         ),</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         Petal.Length_iqr = IQR(Petal.Length,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             na.rm = TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         ),</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         Petal.Width_iqr = IQR(Petal.Width,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             na.rm = TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         ),</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         .groups = "drop"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     )</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">aggregated</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 3 × 13</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Species  Sepal.Length_mean Sepal.Width_mean Petal.Length_mean Petal.Width_mean</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>                <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> setosa                5.01             3.43              1.46            0.246</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> versico…              5.94             2.77              4.26            1.33 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span> virgini…              6.59             2.97              5.55            2.03 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 8 more variables: Sepal.Length_sd &lt;dbl&gt;, Sepal.Width_sd &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   Petal.Length_sd &lt;dbl&gt;, Petal.Width_sd &lt;dbl&gt;, Sepal.Length_iqr &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   Sepal.Width_iqr &lt;dbl&gt;, Petal.Length_iqr &lt;dbl&gt;, Petal.Width_iqr &lt;dbl&gt;</span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div style="
    display: flex;
    flex-direction: row;
    justify-content: space-between;
    align-items: flex-end;
  ">
  <div>Developed by </div>

  <div style="text-align: right">
    iNZightTools is part of the
    <a href="https://inzight.nz" class="external-link">iNZight</a> project.
  </div>
</div>

      </footer></div>

  


  

  </body></html>

