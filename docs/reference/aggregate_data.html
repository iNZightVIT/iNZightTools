<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Aggregate data by categorical variables — aggregate_data • iNZightTools</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Aggregate data by categorical variables — aggregate_data"><meta name="description" content="Summarizes non-categorical variables in a dataframe by grouping them
based on specified categorical variables and returns the aggregated result
along with the tidyverse code used to generate it."><meta property="og:description" content="Summarizes non-categorical variables in a dataframe by grouping them
based on specified categorical variables and returns the aggregated result
along with the tidyverse code used to generate it."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">iNZightTools</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.0.1.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/iNZightVIT/iNZightTools/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Aggregate data by categorical variables</h1>
      <small class="dont-index">Source: <a href="https://github.com/iNZightVIT/iNZightTools/blob/HEAD/R/aggregate.R" class="external-link"><code>R/aggregate.R</code></a></small>
      <div class="d-none name"><code>aggregate_data.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Summarizes non-categorical variables in a dataframe by grouping them
based on specified categorical variables and returns the aggregated result
along with the tidyverse code used to generate it.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">aggregate_data</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  <span class="va">group_vars</span>,</span>
<span>  <span class="va">summaries</span>,</span>
<span>  vars <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  names <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  quantiles <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.25</span>, <span class="fl">0.75</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">aggregate_dt</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  <span class="va">dt</span>,</span>
<span>  <span class="va">dt_comp</span>,</span>
<span>  group_vars <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">summaries</span>,</span>
<span>  vars <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  names <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  quantiles <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.25</span>, <span class="fl">0.75</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>A dataframe or survey design object to be aggregated.</p></dd>


<dt id="arg-group-vars">group_vars<a class="anchor" aria-label="anchor" href="#arg-group-vars"></a></dt>
<dd><p>A character vector specifying the variables in <code>data</code> to '
be used as grouping factors.</p></dd>


<dt id="arg-summaries">summaries<a class="anchor" aria-label="anchor" href="#arg-summaries"></a></dt>
<dd><p>An unnamed character vector or named list of summary
functions to calculate for each group.
If unnamed, the vector elements should be names of variables in the
dataset for which summary statistics need to be calculated.
If named, the names should correspond to the summary functions
(e.g., "mean", "sd", "iqr") to be applied to each variable.</p></dd>


<dt id="arg-vars">vars<a class="anchor" aria-label="anchor" href="#arg-vars"></a></dt>
<dd><p>(Optional) A character vector specifying the names of variables
in the dataset for which summary statistics need to be calculated.
This argument is ignored if <code>summaries</code> is a named list.</p></dd>


<dt id="arg-names">names<a class="anchor" aria-label="anchor" href="#arg-names"></a></dt>
<dd><p>(Optional) A character vector or named list providing name
templates for the newly created variables. See details for more
information.</p></dd>


<dt id="arg-quantiles">quantiles<a class="anchor" aria-label="anchor" href="#arg-quantiles"></a></dt>
<dd><p>(Optional) A numeric vector specifying the desired
quantiles (e.g., c(0.25, 0.5, 0.75)).
See details for more information.</p></dd>


<dt id="arg-dt">dt<a class="anchor" aria-label="anchor" href="#arg-dt"></a></dt>
<dd><p>A character string representing the name of the date-time variable
in the dataset.</p></dd>


<dt id="arg-dt-comp">dt_comp<a class="anchor" aria-label="anchor" href="#arg-dt-comp"></a></dt>
<dd><p>A character string specifying the component of the date-time
to use for grouping.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>An aggregated dataframe containing the summary statistics for each
group, along with the tidyverse code used for the aggregation.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The <code>aggregate_data()</code> function accepts any R function that returns a
single-value summary (e.g., <code>mean</code>, <code>var</code>, <code>sd</code>, <code>sum</code>, <code>IQR</code>). By default,
new variables are named <code>{var}_{fun}</code>, where <code>{var}</code> is the variable name
and <code>{fun}</code> is the summary function used. The user can provide custom names
using the <code>names</code> argument, either as a vector of the same length as <code>vars</code>,
or as a named list where the names correspond to summary functions (e.g.,
"mean" or "sd").</p>
<p>The special summary "missing" can be included, which counts the number of
missing values in the variable. The default name for this summary is
<code>{var}_missing</code>.</p>
<p>If <code>quantiles</code> are requested, the function calculates the specified
quantiles (e.g., 25th, 50th, 75th percentiles), creating new variables for
each quantile. To customize the names of these variables, use <code>{p}</code> as a
placeholder in the <code>names</code> argument, where <code>{p}</code> represents the quantile
value. For example, using <code>names = "Q{p}_{var}"</code> will create variables like
"Q0.25_Sepal.Length" for the 25th percentile.</p>
    </div>
    <div class="section level2">
    <h2 id="functions">Functions<a class="anchor" aria-label="anchor" href="#functions"></a></h2>

<ul><li><p><code>aggregate_dt()</code>: Aggregate data by dates and times</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="code.html">code</a></code></p>
<p><code>aggregate_data</code></p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Tom Elliott, Owen Jin, Zhaoming Su</p>
<p>Zhaoming Su</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">aggregated</span> <span class="op">&lt;-</span></span></span>
<span class="r-in"><span>    <span class="fu">aggregate_data</span><span class="op">(</span><span class="va">iris</span>,</span></span>
<span class="r-in"><span>        group_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Species"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>        summaries <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mean"</span>, <span class="st">"sd"</span>, <span class="st">"iqr"</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="code.html">code</a></span><span class="op">(</span><span class="va">aggregated</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> iris |&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     dplyr::group_by(Species) |&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     dplyr::summarise(</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         Sepal.Length_mean = mean(Sepal.Length,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             na.rm = TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         ),</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         Sepal.Width_mean = mean(Sepal.Width,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             na.rm = TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         ),</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         Petal.Length_mean = mean(Petal.Length,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             na.rm = TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         ),</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         Petal.Width_mean = mean(Petal.Width,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             na.rm = TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         ),</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         Sepal.Length_sd = sd(Sepal.Length,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             na.rm = TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         ),</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         Sepal.Width_sd = sd(Sepal.Width,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             na.rm = TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         ),</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         Petal.Length_sd = sd(Petal.Length,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             na.rm = TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         ),</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         Petal.Width_sd = sd(Petal.Width,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             na.rm = TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         ),</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         Sepal.Length_iqr = IQR(Sepal.Length,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             na.rm = TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         ),</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         Sepal.Width_iqr = IQR(Sepal.Width,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             na.rm = TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         ),</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         Petal.Length_iqr = IQR(Petal.Length,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             na.rm = TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         ),</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         Petal.Width_iqr = IQR(Petal.Width,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             na.rm = TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         ),</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         .groups = "drop"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     )</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">aggregated</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 3 × 13</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Species  Sepal.Length_mean Sepal.Width_mean Petal.Length_mean Petal.Width_mean</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>                <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> setosa                5.01             3.43              1.46            0.246</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> versico…              5.94             2.77              4.26            1.33 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span> virgini…              6.59             2.97              5.55            2.03 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 8 more variables: Sepal.Length_sd &lt;dbl&gt;, Sepal.Width_sd &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   Petal.Length_sd &lt;dbl&gt;, Petal.Width_sd &lt;dbl&gt;, Sepal.Length_iqr &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   Sepal.Width_iqr &lt;dbl&gt;, Petal.Length_iqr &lt;dbl&gt;, Petal.Width_iqr &lt;dbl&gt;</span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div style="
    display: flex;
    flex-direction: row;
    justify-content: space-between;
    align-items: flex-end;
  ">
  <div>Developed by </div>

  <div style="text-align: right">
    iNZightTools is part of the
    <a href="https://inzight.nz" class="external-link">iNZight</a> project.
  </div>
</div>

    </footer></div>





  </body></html>

